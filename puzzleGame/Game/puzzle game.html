<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
  <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
  <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<title>테스트</title>


<style>
#outline{
  border: solid 1px red;
}
#puzzle span {
 border : solid 1px blue;
  background-color: black;
  float:left;
  
  margin: 5px;
  overflow: hidden;
   padding: 100px 0 0 0;
  width: 100px;
  z-index: 200;
}

 #puzzle {
 border : solid 1px red;
 height : 339px;
 width : 339px;
 margin: 0 auto;
 
}

/* #puzzle #a {
 background-color: yellow;
}
#b{
 background-color: yellow;
} */
</style>




</head>
<body>
<div id=outline>
  <div id=puzzle>
    <span id='a'></span><span id='b'></span><span id='c'></span>
    <span id='d'></span><span id='e'></span><span id='f'></span>
    <span id='g'></span><span id='h'></span><span id='i'></span>
  </div>
  <div>
    <input id="game_state">
  </div>
  <div>
    <button id=start_game>start</button>
    <button id=reset_game>reset</button>
    <button id=next_game>next</button>
  </div>
</div>


<script>




//와일문으로 3개 이상 찰 때 까지

var box_data = []; // box의 상태를 저장하기 위한 배열. 일단 true,false로 저장한다.
var box_state = [false, false, false, false, false, false, false, false, false]; // 현재 선택된 박스의 상태
var box_id = []; // 반복문을 위해 box id를 넣어둔 배열, 
var g_round = 0; // 스테이지 번호.. 난이도를 조정할지 생각중
var g_score = 0; // 맞출때, 틀릴때, 클리어시 점수를 낼것.. 
var g_timer = 0; // 시간 제한을 둘까?

function new_game(){ // 초기화 작업
  for(var i=0; i<9; i++){
    box_state[i] = false; // 일단 뒤집어진 상태로 저장
    if (parseInt(Math.random()*2)){ // 답 저장
      box_data[i] = 'true';
    } else {
      box_data[i] = 'false';
    }
  }
  g_round = 0;
  g_score = 0;
  g_timer = 0;
}
function ready(){ //한번씩 뒤집어서 확인 시켜줄것. 준비,시작 메세지 출력?
  for(var i=0; i<9; i++){
    if(box_data[i] == 'true'){ // 저장된 답이 true 일 경우
      change_color(i);
    } 
  }
  window.setTimeout(function(){
    console.log("게임 준비 완료");
  }, 3000); 
}
function game_over(){ //게임 종료.졌다고 메세지 출력.시작으로 돌아감 
  
}




/* function flipCard(stateArr){
     window.setTimeout(function(){

      for (var i in box_data){
        box_state[i] = box_data[i];
           if (box_data[i] == true){
               
               $(box_id[i]).css( "background-color", 'blue' );
             } 
      }

      $('box1').css( "background-color", 'blue' );

      
    }, 3000);
  }
       */





function change_color(i){
  box_id[i].style.backgroundColor = "#ff0000";
  window.setTimeout(function(){
    box_id[i].style.backgroundColor = "#000000";
  }, 2000);
}

function rotate(){ //화면 회전용 함수.. 추가회전시 각도 문제 남아있음
  $('#puzzle').animate({  borderSpacing: -90 }, {
      step: function(now,fx) {
        $(this).css('-webkit-transform','rotate('+now+'deg)'); 
        $(this).css('-moz-transform','rotate('+now+'deg)');
        $(this).css('transform','rotate('+now+'deg)');
        //console.log(now); //각도 출력
      },
      duration:'fast'
  },'linear');
}

function box_click(select, value){
  

      if (box_state[value] == false){
        $(box_id[value]).css( "background-color", 'lightblue' );
        box_state[value] = true;}
      else{ 
        $(box_id[value]).css( "background-color", 'black' );
        box_state[value] = false;}
      

  // 박스 선택시. 배열과 비교하여 맞췄는지 확인
  if(select == 'true'){
     console.log("true"); // 맞췄을 경우.. 뒤집어서 색상을 변경할수 있도록 한다.
  } else{
     console.log("false");// 틀렸을 경우.. 뭘 할지 생각중..
  }
};

var box0 = document.getElementById('a');
var box1 = document.getElementById('b');
var box2 = document.getElementById('c');
var box3 = document.getElementById('d');
var box4 = document.getElementById('e');
var box5 = document.getElementById('f');
var box6 = document.getElementById('g');
var box7 = document.getElementById('h');
var box8 = document.getElementById('i');

box_id = [box0,box1,box2,box3,box4,box5,box6,box7,box8];

box0.onclick = function(){  box_click(box_data[0], 0);}
box1.onclick = function(){  box_click(box_data[1], 1);}
box2.onclick = function(){  box_click(box_data[2], 2);}
box3.onclick = function(){  box_click(box_data[3], 3);}
box4.onclick = function(){  box_click(box_data[4], 4);}
box5.onclick = function(){  box_click(box_data[5], 5);}
box6.onclick = function(){  box_click(box_data[6], 6);}
box7.onclick = function(){  box_click(box_data[7], 7);}
box8.onclick = function(){  box_click(box_data[8], 8);}

/*
window.setTimeout(function(){
  
}, 3000); */



/* $(box_id[0]).click(function(event){
  if (box_state[0] == false){
    $(box_id[0]).css( "background-color", 'lightblue' );
    box_state[0] = true;}
  else{ 
    $(box_id[0]).css( "background-color", 'black' );
    box_state[0] = false;}
  });
$(box_id[1]).click(function(event){
    if (box_state[1] == false){
      $(box_id[1]).css( "background-color", 'lightblue' );
      box_state[1] = true;}
    else{ 
      $(box_id[1]).css( "background-color", 'black' );
      box_state[1] = false;}
    });
$(box_id[2]).click(function(event){
    if (box_state[2] == false){
      $(box_id[2]).css( "background-color", 'lightblue' );
      box_state[2] = true;}
    else{ 
      $(box_id[2]).css( "background-color", 'black' );
      box_state[2] = false;}
    });
$(box_id[3]).click(function(event){
    if (box_state[3] == false){
      $(box_id[3]).css( "background-color", 'lightblue' );
      box_state[3] = true;}
    else{ 
      $(box_id[3]).css( "background-color", 'black' );
      box_state[3] = false;}
    });
$(box_id[4]).click(function(event){
    if (box_state[4] == false){
      $(box_id[4]).css( "background-color", 'lightblue' );
      box_state[4] = true;}
    else{ 
      $(box_id[4]).css( "background-color", 'black' );
      box_state[4] = false;}
    });
$(box_id[5]).click(function(event){
    if (box_state[5] == false){
      $(box_id[5]).css( "background-color", 'lightblue' );
      box_state[5] = true;}
    else{ 
      $(box_id[5]).css( "background-color", 'black' );
      box_state[5] = false;}
    });
$(box_id[6]).click(function(event){
    if (box_state[6] == false){
      $(box_id[6]).css( "background-color", 'lightblue' );
      box_state[6] = true;}
    else{ 
      $(box_id[6]).css( "background-color", 'black' );
      box_state[6] = false;}
    });
$(box_id[7]).click(function(event){
    if (box_state[7] == false){
      $(box_id[7]).css( "background-color", 'lightblue' );
      box_state[7] = true;}
    else{ 
      $(box_id[7]).css( "background-color", 'black' );
      box_state[7] = false;}
    });
$(box_id[8]).click(function(event){
    if (box_state[8] == false){
      $(box_id[8]).css( "background-color", 'lightblue' );
      box_state[8] = true;}
    else{ 
      $(box_id[8]).css( "background-color", 'black' );
      box_state[8] = false;}
    });
    */

  new_game(); //게임 초기화
  ready();//배열에 값 입력 및 정답 확인 

        
        
      

       

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

/*   function clickCard(){
     click.()
     
   }  */
  
  

</script>
</body>
</html>